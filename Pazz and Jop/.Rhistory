#load data
#pj <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
#                       header=F, stringsAsFactors=F)
pj <- list()
pow <- data.frame()
pjM <- data.frame()
year <- "1974"
for (i in 1:34) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
#pj[[i]] <- pj[[i]][,1:4]
pj[[i]]$year <- year
#pjM <- rbind(pjM, pj[[i]])
}
View(pj[[5]])
ncol(pj[[5]])
length(pj)
for (i in 1:length(pj)) {
ncol(pj[[i]])
}
for (i in 1:length(pj)) {
print(ncol(pj[[i]]))
}
View(pj[[34]])
pj <- list()
pow <- data.frame()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
#pj[[i]] <- pj[[i]][,1:4]
pj[[i]]$year <- year
#pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
View(pj[[34]])
for (i in 1:length(pj)) {
print(ncol(pj[[i]]))
}
View(pj[[6]])
?gsub
pj <- list()
pow <- data.frame()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- gsub("*", "", pj[[i]])
#pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
#pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
View(pj[[6]])
View(pj[[5]])
View(pj[[6]])
pj <- list()
pow <- data.frame()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
#pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
#pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
View(pj[[6]])
View(pj[[6]][,1:4])
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
#pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
View(pj[[6]])
str(pjM)
for (i in 1:length(pj)) {
pjM <- rbind(pjM, pj[[i]])
}
View(pjM)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
#pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
#pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
View(pjM)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
View(pjM)
View(pjM[pjM$V1=="*",])
pjM <- pjM[!pjM$V1=="*", ]
View(pjM[pjM$V1=="*",])
View(pjM)
View(pjM[grep("^[^0-9]"),])
View(pjM[grep("^[^0-9]", pjM$V1),])
pjM <- pjM[!pjM$V1=="**", ]
View(pjM[grep("^[^0-9]", pjM$V1),])
View(pjM[grep("^[^0-9+\\.]", pjM$V1),])
row.names(pjM[grep("^[^0-9+\\.]", pjM$V1),])
grepl("^[^0-9]", pjM[23,1])
grepl("^[^0-9]", pjM[24,1])
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- pjM[i-1,1]+1
}
}
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
pjM[23,]
View(pjM)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
#for (i in 1:length(pj)) {
#    pjM <- rbind(pjM, pj[[i]])
#}
pjM <- pjM[!pjM$V1=="*", ]
pjM <- pjM[!pjM$V1=="**", ]
#> row.names(pjM[grep("^[^0-9+\\.]", pjM$V1),])
#[1] "23"   "193"  "269"  "284"  "482"  "486"  "530"  "646"  "743"  "899"  "906"  "1149" "1172"
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
View(pjM)
names(pjM)
pjM[1,2]
strsplit(pjM[1,2], ":")
strsplit(pjM[1,2], ": ")
unlist(strsplit(pjM[1,2], ": "))
unlist(strsplit(pjM[1,2], ": "))[1]
unlist(strsplit(pjM[1,2], ": "))[2]
?strsplit
albums <- character()
for (i in 1:nrow(pjM)) {
info <- unlist(strsplit(pjM[i,2], ": "))
pjM[i,2] <- info[1]
albums[i] <- info[2]
}
View(albums)
View(pjM)
pjM <- rbind(pjM$V1, pjM$V2, albums, pjM$V3, pjM$V4, pjM$year)
View(pjM)
setwd("C:/Users/Seth/Documents/bandatablog/Pazz and Jop")
#year <- as.character(as.numeric(year)+1)
#year <- "1994"
#load data
#pj <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
#                       header=F, stringsAsFactors=F)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
#for (i in 1:length(pj)) {
#    pjM <- rbind(pjM, pj[[i]])
#}
#get rid of rogue asterisks
pjM <- pjM[!pjM$V1=="*", ]
pjM <- pjM[!pjM$V1=="**", ]
#fix rows that we screwed up by asterisks
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
albums <- character()
for (i in 1:nrow(pjM)) {
info <- unlist(strsplit(pjM[i,2], ": "))
pjM[i,2] <- info[1]
albums[i] <- info[2]
}
pjM <- cbind(pjM$V1, pjM$V2, albums, pjM$V3, pjM$V4, pjM$year)
View(pjM)
setwd("C:/Users/Seth/Documents/bandatablog/Pazz and Jop")
#year <- as.character(as.numeric(year)+1)
#year <- "1994"
#load data
#pj <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
#                       header=F, stringsAsFactors=F)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
#for (i in 1:length(pj)) {
#    pjM <- rbind(pjM, pj[[i]])
#}
#get rid of rogue asterisks
pjM <- pjM[!pjM$V1=="*", ]
pjM <- pjM[!pjM$V1=="**", ]
#fix rows that we screwed up by asterisks
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
View(pjM)
albums <- character()
for (i in 1:nrow(pjM)) {
if(grepl(":", pjM[i,2])) {
info <- unlist(strsplit(pjM[i,2], ": "))
pjM[i,2] <- info[1]
albums[i] <- info[2]
} else {
albums[i] <- pjM[i,2]
}
}
pjM <- cbind(pjM$V1, pjM$V2, albums, pjM$V3, pjM$V4, pjM$year)
View(pjM)
names(pjM) <- c("rank", "artist", "album", "points", "mentions", "year")
View(pjM)
names(pjM)
names(pjM)
str(pjM)
setwd("C:/Users/Seth/Documents/bandatablog/Pazz and Jop")
#year <- as.character(as.numeric(year)+1)
#year <- "1994"
#load data
#pj <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
#                       header=F, stringsAsFactors=F)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
#for (i in 1:length(pj)) {
#    pjM <- rbind(pjM, pj[[i]])
#}
#get rid of rogue asterisks
pjM <- pjM[!pjM$V1=="*", ]
pjM <- pjM[!pjM$V1=="**", ]
#fix rows that we screwed up by asterisks
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
albums <- character()
for (i in 1:nrow(pjM)) {
if(grepl(":", pjM[i,2])) {
info <- unlist(strsplit(pjM[i,2], ": "))
pjM[i,2] <- info[1]
albums[i] <- info[2]
} else {
albums[i] <- pjM[i,2]
}
}
pjM <- cbind(pjM$V1, pjM$V2, albums, pjM$V3, pjM$V4, pjM$year)
str(pjM)
View(pjM)
?data.frame
setwd("C:/Users/Seth/Documents/bandatablog/Pazz and Jop")
#year <- as.character(as.numeric(year)+1)
#year <- "1994"
#load data
#pj <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
#                       header=F, stringsAsFactors=F)
pj <- list()
pjM <- data.frame()
year <- "1974"
for (i in 1:33) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
#for (i in 1:length(pj)) {
#    pjM <- rbind(pjM, pj[[i]])
#}
#get rid of rogue asterisks
pjM <- pjM[!pjM$V1=="*", ]
pjM <- pjM[!pjM$V1=="**", ]
#fix rows that we screwed up by asterisks
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
albums <- character()
for (i in 1:nrow(pjM)) {
if(grepl(":", pjM[i,2])) {
info <- unlist(strsplit(pjM[i,2], ": "))
pjM[i,2] <- info[1]
albums[i] <- info[2]
} else {
albums[i] <- pjM[i,2]
}
}
pjM <- data.frame(rank=pjM$V1,
artist=pjM$V2,
album=albums,
points=pjM$V3,
mentions=pjM$V4,
year=pjM$year,
stringsAsFactors=F)
str(pjM)
View(pjM)
setwd("C:/Users/Seth/Documents/bandatablog/Pazz and Jop")
#year <- as.character(as.numeric(year)+1)
#year <- "1994"
#load data
#pj <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
#                       header=F, stringsAsFactors=F)
pj <- list()
pjM <- data.frame()
year <- "1973"
for (i in 1:34) {
#set year
year <- as.character(as.numeric(year)+1)
#load data
pj[[i]] <- read.delim(paste("pazz and jop ", year, ".txt", sep=""),
header=F, stringsAsFactors=F)
#deal with asterisks
pj[[i]] <- pj[[i]][,1:4]
#add year
pj[[i]]$year <- year
pjM <- rbind(pjM, pj[[i]])
}
#write.csv(wnoM, "weekly number ones.csv", row.names=F)
#for (i in 1:length(pj)) {
#    pjM <- rbind(pjM, pj[[i]])
#}
#get rid of rogue asterisks
pjM <- pjM[!pjM$V1=="*", ]
pjM <- pjM[!pjM$V1=="**", ]
#fix rows that we screwed up by asterisks
for (i in 1:nrow(pjM)) {
if(grepl("^[^0-9+\\.]", pjM[i,1])) {
pjM[i,4] <- pjM[i,3]
pjM[i,3] <- pjM[i,2]
pjM[i,2] <- pjM[i,1]
pjM[i,1] <- as.character(as.numeric(pjM[i-1,1])+1)
}
}
albums <- character()
for (i in 1:nrow(pjM)) {
if(grepl(":", pjM[i,2])) {
info <- unlist(strsplit(pjM[i,2], ": "))
pjM[i,2] <- info[1]
albums[i] <- info[2]
} else {
albums[i] <- pjM[i,2]
}
}
pjM <- data.frame(rank=pjM$V1,
artist=pjM$V2,
album=albums,
points=pjM$V3,
mentions=pjM$V4,
year=pjM$year,
stringsAsFactors=F)
str(pjM)
pjM$rank <- as.numeric(pjM$rank)
str(pjM)
View(pjM)
write.csv(pjM, "pazz and jop 1974-2007.csv", row.names=F)
pjM$year <- as.Date(pjM$year, "%Y")
str(pjM)
View(pjM)
